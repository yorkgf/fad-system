# 部署文件摘要 - 家长预约系统

## ✅ 文件检查结果（2025-02-09）

### 前端文件 - pages/
| 文件 | 大小 | 状态 |
|------|------|------|
| index.html | 5.17 KB | ✅ 就绪 |
| parent_dashboard.html | 67.47 KB | ✅ 就绪 |
| logo.png | 54.66 KB | ✅ 就绪 |

### 后端文件 - CFunction/
| 文件 | 大小 | 状态 |
|------|------|------|
| scf_index.js | 13.46 KB | ✅ 就绪 |
| package.json | 0.32 KB | ✅ 就绪 |
| scf_bootstrap | 0.17 KB | ✅ 就绪 |
| node_modules/ | 82 个文件 | ✅ 就绪 |

---

## 🚀 快速部署步骤

### 步骤 1: 上传后端到腾讯云函数 SCF

1. 打开腾讯云控制台 → 云函数
2. 新建函数 → Web 函数 → Node.js 16.x/18.x
3. 上传 `CFunction` 文件夹
4. 配置环境变量：
   ```
   MONGO_URI=mongodb://49.235.189.246:27017
   DB_NAME=GHS
   GHA_DB_NAME=GHA
   ```
5. 复制函数访问路径（类似：`https://xxx.ap-shanghai.tencentscf.com`）

### 步骤 2: 配置前端 API 地址

1. 打开 `pages/parent_dashboard.html`
2. 找到第 **1227** 行：
   ```javascript
   const API_BASE_URL = 'https://1300190563-2hqncjntw.ap-shanghai.tencentscf.com';
   ```
3. 替换为你的云函数 URL

### 步骤 3: 上传前端到 EdgeOne Pages

1. 打开 EdgeOne 控制台
2. 创建静态网站
3. 上传 `pages` 文件夹中的所有文件

---

## ⚙️ 环境变量配置

| 变量名 | 值 | 说明 |
|--------|-----|------|
| MONGO_URI | mongodb://49.235.189.246:27017 | MongoDB 连接地址 |
| DB_NAME | GHS | 会议预约数据库 |
| GHA_DB_NAME | GHA | 学生信息数据库 |
| PORT | 9000 | 服务端口 |

---

## 🔧 部署后验证

### 测试后端 API
```bash
curl https://your-function-url/api/test
```

### 测试前端
1. 访问 EdgeOne Pages 提供的网站地址
2. 输入手机号登录
3. 测试预约功能

---

## 📋 部署前检查清单

- [ ] 云函数环境变量已配置
- [ ] 前端 API_BASE_URL 已更新
- [ ] pages 文件夹所有文件已上传
- [ ] CFunction 文件夹已上传
- [ ] 云函数已部署并可访问
- [ ] EdgeOne Pages 已部署并可访问

---

## 📝 注意事项

1. **API 地址修改**：每次部署云函数后，需要更新前端 `API_BASE_URL`
2. **会议类型显示**：前端已添加会议类型标识功能
3. **冲突检测**：前后端都已实现预约冲突检测
4. **数据库连接**：确保 MongoDB 服务器可访问

---

## 📞 支持

如有问题，请检查：
- 云函数日志
- EdgeOne Pages 访问日志
- MongoDB 连接状态

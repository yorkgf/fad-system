service: fad-backend

provider:
  name: tencent
  runtime: Nodejs18.15
  region: ap-guangzhou
  memorySize: 256
  timeout: 30
  environment:
    # 敏感配置请在腾讯云 SCF 控制台配置环境变量
    # 需要配置: MONGO_URI, DB_NAME, GHS_MONGO_URI, GHS_DB_NAME
    # 需要配置: JWT_SECRET, JWT_SECRET_OLD (迁移期), ALLOWED_ORIGINS
    JWT_EXPIRES_IN: 7d
    SENDER_NAME: FAD管理系统

plugins:
  - serverless-tencent

package:
  exclude:
    - node_modules/**
    - .git/**
    - .env
    - upload/**

functions:
  api:
    handler: src/index.handler
    description: FAD Backend API
    events:
      - apigw:
          parameters:
            serviceName: fad-api
            description: FAD管理后端API
            environment: release
            endpoints:
              - path: /
                method: ANY
                description: API根路径
                enableCORS: true
              - path: /{proxy+}
                method: ANY
                description: 代理所有路径
                enableCORS: true
